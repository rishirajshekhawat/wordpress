"use strict";jQuery(document).ready(function(o){o("#wc_twilio_sms_shorten_urls, #wc_twilio_sms_url_shortener_service").on("change",function(){var s=o("#wc_twilio_sms_url_shortener_service"),e=s.closest("tr"),t=o("#wc_twilio_sms_google_url_shortener_api_key").closest("tr"),i=o("#wc_twilio_sms_firebase_dynamic_links_api_key").closest("tr"),_=o("#wc_twilio_sms_firebase_dynamic_links_domain").closest("tr");o("#wc_twilio_sms_shorten_urls").is(":checked")?(e.show(),"firebase-dynamic-links"===s.val()?(t.hide(),i.show(),_.show()):(t.show(),i.hide(),_.hide())):(e.hide(),t.hide(),i.hide(),_.hide())}).change(),o("#wc_twilio_sms_enable_admin_sms").on("change",function(){o(this).is(":checked")?o(this).closest("tr").nextUntil("p").show():o(this).closest("tr").nextUntil("p").hide()}).change(),o("a.wc_twilio_sms_test_sms_button").on("click",function(s){s.preventDefault();var e=o("input#wc_twilio_sms_test_mobile_number"),t=o("textarea#wc_twilio_sms_test_message");e.val()&&e.val()||alert(wc_twilio_sms_admin.test_sms_error_message),e.closest("table").block({message:null,overlayCSS:{background:"#fff url("+wc_twilio_sms_admin.assets_url+") no-repeat center",opacity:.6}});var i={mobile_number:e.val(),message:t.val(),security:wc_twilio_sms_admin.test_sms_nonce,action:"woocommerce_twilio_sms_send_test_sms"};jQuery.post(wc_twilio_sms_admin.ajax_url,i,function(s){e.closest("table").unblock(),e.val(""),t.val(""),alert(s)})}),o("#wc_twilio_sms_toggle_order_updates").change(function(){var s,e=o("div#wc_twilio_sms_order_meta_box"),t=o(this);e.is(".processing")||(e.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+wc_twilio_sms_admin.assets_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),s={action:"wc_twilio_sms_toggle_order_updates",security:wc_twilio_sms_admin.toggle_order_updates_nonce,order_id:wc_twilio_sms_admin.edit_order_id},o.ajax({type:"POST",url:wc_twilio_sms_admin.ajax_url,data:s,success:function(s){e.removeClass("processing").unblock(),s&&t.blur()},dataType:"html"}))}),o("#wc_twilio_sms_order_message").on("change keyup input",function(){o("#wc_twilio_sms_order_message_char_count").text(o(this).val().length),160<o(this).val().length&&o("#wc_twilio_sms_order_message_char_count").css("color","red")}),o("a#wc_twilio_sms_order_send_message").click(function(s){s.preventDefault();var e,t=o("div#wc_twilio_sms_order_meta_box"),i=o("textarea#wc_twilio_sms_order_message");t.is(".processing")||(t.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+wc_twilio_sms_admin.assets_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),e={action:"wc_twilio_sms_send_order_sms",security:wc_twilio_sms_admin.send_order_sms_nonce,order_id:wc_twilio_sms_admin.edit_order_id,message:i.val()},o.ajax({type:"POST",url:wc_twilio_sms_admin.ajax_url,data:e,success:function(s){t.removeClass("processing").unblock(),s&&(t.block({message:s,timeout:900}),i.val(""),o("#wc_twilio_sms_order_message_char_count").text("0"))},dataType:"html"}))}),o(".wc_twilio_sms_enable").each(function(){var s=o(this).data("notification");o(this).on("change",function(){o(this).is(":checked")?(o("input#wc_twilio_sms_bookings_"+s+"_recipients").closest("tr").show(),o("input#wc_twilio_sms_bookings_"+s+"_schedule_number").closest("tr").show(),o("textarea#wc_twilio_sms_bookings_"+s+"_template").closest("tr").show()):(o("input#wc_twilio_sms_bookings_"+s+"_recipients").closest("tr").hide(),o("input#wc_twilio_sms_bookings_"+s+"_schedule_number").closest("tr").hide(),o("textarea#wc_twilio_sms_bookings_"+s+"_template").closest("tr").hide())}).change()}),o("#wc-twilio-sms-bookings-data .wc-metaboxes-wrapper").on("click",".expand_all",function(){return o(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").show(),!1}).on("click",".close_all",function(){return o(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").hide(),!1}),o(".wc_twilio_sms_notification_toggle").each(function(){var s=o(this).data("notification"),e=o("input#wc_twilio_sms_bookings_"+s+"_schedule_number");o(this).on("change",function(){"override"===o(this).find("option:selected").val()?(e.closest("p").show(),e.closest("p").next(".wc-twilio-sms-post-field").show(),o("textarea#wc_twilio_sms_bookings_"+s+"_template").closest("p").show()):(e.closest("p").hide(),e.closest("p").next(".wc-twilio-sms-post-field").hide(),o("textarea#wc_twilio_sms_bookings_"+s+"_template").closest("p").hide())}).change()})});